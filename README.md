### **README: Multiple Regression Analysis of Rent Prices Using `rent99` Dataset**

#### **Overview**
This script performs a multiple regression analysis on the `rent99` dataset, which contains information about apartment rents in Munich, Germany. The goal is to model the rent per square meter (`rentsqm`) based on various factors like the living area, year of construction, location, and amenities (bathroom, kitchen, central heating). The analysis uses multiple linear regression to understand the relationships between these variables and predict rent prices.


#### **How to Run the Code**

1. **Install Required Packages**:
   If you don't have the necessary libraries installed, you can install them using the following commands in R:
   ```r
   install.packages("ggplot2")
   install.packages("gamlss.data")
   ```

2. **Copy the Code**:
   Copy the entire script (or the relevant sections) into your R environment.

3. **Run the Code**:
   Execute the code step-by-step or all at once in your R console or RStudio.

4. **View the Results**:
   After running the script, youâ€™ll see the model summary and the visualizations generated by `ggplot2`. These will help you interpret the relationship between the apartment features and rent per square meter.

#### **Prerequisites**
To run the code, you'll need to have R installed on your machine. Additionally, you need the following R packages:
- **`ggplot2`**: For data visualization.
- **`gamlss.data`**: For loading the dataset.

You can install the required packages using the following commands:

```r
install.packages("ggplot2")
install.packages("gamlss.data")
```

#### **Steps to Run the Code**

1. **Install and Load Libraries**:
   The script starts by installing and loading the necessary libraries. It checks if the libraries are already installed and installs them if not.

```r
if (!require("ggplot2")) install.packages("ggplot2")
library(ggplot2)
if (!require("gamlss.data")) install.packages("gamlss.data")
library(gamlss.data)
```

2. **Load the Dataset**:
   The `rent99` dataset is loaded from the `gamlss.data` package. This dataset contains information about apartment rents and their features.

```r
data("rent99", package = "gamlss.data")
```

3. **Preview the Data**:
   The first five rows of the dataset are displayed to give an overview of the data structure.

```r
head(rent99, 5)
```

4. **Explore Relationships with Visualizations**:
   Before fitting the regression model, the script visualizes the relationship between `rentsqm` (rent per square meter) and key variables like `area` (apartment size) and `yearc` (year of construction). It uses `ggplot2` to create scatter plots with smooth lines.

```r
# Plot rent vs. area
plot_area <- ggplot(rent99, aes(x = area, y = rentsqm)) +
  geom_point(color = "gray", alpha = 0.5) +
  geom_smooth(method = "loess", color = "black") +
  labs(x = "area in sqm", y = "estimated net rent per sqm", title = "Effect of Area") +
  theme_minimal()

# Plot rent vs. year of construction
plot_yearc <- ggplot(rent99, aes(x = yearc, y = rentsqm)) +
  geom_point(color = "gray", alpha = 0.5) +
  geom_smooth(method = "loess", color = "black") +
  labs(x = "year of construction", y = "estimated net rent per sqm", title = "Effect of Year of Construction") +
  theme_minimal()
```

5. **Feature Engineering**:
   New features are generated to capture nonlinear effects and create binary variables for location:
   - **Inverse of Area**: `1 / area`
   - **Squared Year of Construction**: `yearc^2`
   - **Location Dummies**: Binary variables for location types (location 2 and location 3).

```r
rent99$inv_area <- 1 / rent99$area
rent99$yearc_squared <- rent99$yearc^2
rent99$glocation <- ifelse(rent99$location == 2, 1, 0)
rent99$tlocation <- ifelse(rent99$location == 3, 1, 0)
```

6. **Fit the Regression Model**:
   A multiple linear regression model is fitted using the `lm()` function. The dependent variable is `rentsqm`, and the independent variables include the transformed `area`, `yearc`, `yearc_squared`, location dummies, and binary variables for amenities (bathroom, kitchen, and central heating).

```r
model <- lm(rentsqm ~ inv_area + yearc + yearc_squared + glocation + tlocation + 
            bath + kitchen + cheating, data = rent99)
```

7. **View Model Summary**:
   After fitting the model, the summary of the regression is printed to view the estimated coefficients and their significance.

```r
summary(model)
```

8. **Make Predictions**:
   The model is used to make predictions of rent per square meter (`predicted_rentsqm`) for each observation in the dataset.

```r
rent99$predicted_rentsqm <- predict(model, rent99)
```

9. **Visualize Predicted Results**:
   The predicted rent values are plotted against `area` and `yearc` to visualize how the model's predictions vary with these variables.

```r
# Plot predicted rent vs. area
plot_area <- ggplot(rent99, aes(x = area, y = predicted_rentsqm)) +
  geom_point(color = "gray", alpha = 0.5) +
  geom_smooth(method = "loess", color = "black") +
  labs(x = "area in sqm", y = "predicted rent per sqm", title = "Effect of Area") +
  theme_minimal()

# Plot predicted rent vs. year of construction
plot_yearc <- ggplot(rent99, aes(x = yearc, y = predicted_rentsqm)) +
  geom_point(color = "gray", alpha = 0.5) +
  geom_smooth(method = "loess", color = "black") +
  labs(x = "year of construction", y = "predicted rent per sqm", title = "Effect of Year of Construction") +
  theme_minimal()
```

#### **Output**
- **Plots**: The script generates scatter plots and smooth lines that show the effects of `area` and `yearc` on rent per square meter, both for the observed data and the predicted rent values from the regression model.
- **Model Summary**: The output includes a summary of the regression model with coefficients, standard errors, and p-values for each predictor.


#### **Conclusion**
This script provides a straightforward approach to analyzing apartment rents using multiple regression in R. By generating relevant features and visualizing the results, it offers insights into how different factors (such as apartment size, age, and location) affect rent prices in Munich. The model can be further refined and extended by including additional variables or exploring nonlinear modeling techniques.

Let me know if you have any questions or need further clarification!
